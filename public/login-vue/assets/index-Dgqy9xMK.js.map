{"version":3,"file":"index-Dgqy9xMK.js","sources":["../../src/utils/api.ts","../../src/composables/useAuth.ts","../../src/utils/validation.ts","../../src/components/auth/LoginPage.vue","../../src/App.vue","../../src/main.ts"],"sourcesContent":["/**\n * API utility functions for authentication\n * Ensures proper Moodle login workflow with actual form submission\n */\n\ninterface LoginCredentials {\n  username: string\n  password: string\n  rememberMe: boolean\n}\n\ninterface LoginResponse {\n  success: boolean\n  message?: string\n  user?: any\n  redirect?: string\n}\n\n/**\n * Login user with credentials using actual form submission\n * This ensures proper Moodle session handling and redirect\n */\nexport async function loginUser(credentials: LoginCredentials): Promise<LoginResponse> {\n  try {\n    // Get the login token from Moodle's login page\n    const loginToken = await getLoginToken()\n\n    if (!loginToken) {\n      return {\n        success: false,\n        message: 'Could not retrieve login token. Please refresh the page and try again.'\n      }\n    }\n\n    // Create a hidden form and submit it (this ensures proper Moodle handling)\n    const form = document.createElement('form')\n    form.method = 'POST'\n    form.action = '/login/index.php'\n    form.style.display = 'none'\n\n    // Add form fields\n    const fields = {\n      'username': credentials.username.toLowerCase().trim(),\n      'password': credentials.password,\n      'rememberusername': credentials.rememberMe ? '1' : '0',\n      'logintoken': loginToken,\n      'anchor': location.hash\n    }\n\n    Object.entries(fields).forEach(([name, value]) => {\n      const input = document.createElement('input')\n      input.type = 'hidden'\n      input.name = name\n      input.value = value\n      form.appendChild(input)\n    })\n\n    // Append form to body and submit\n    document.body.appendChild(form)\n    form.submit()\n\n    // Return success - the form submission will handle the redirect\n    return {\n      success: true,\n      message: 'Logging in...'\n    }\n\n  } catch (error: any) {\n    console.error('Login error:', error)\n    return {\n      success: false,\n      message: error.message || 'An error occurred during login. Please try again.'\n    }\n  }\n}\n\n/**\n * Login as guest using form submission\n */\nexport async function loginGuest(): Promise<LoginResponse> {\n  try {\n    // Get the login token\n    const loginToken = await getLoginToken()\n\n    if (!loginToken) {\n      return {\n        success: false,\n        message: 'Could not retrieve login token. Please refresh the page and try again.'\n      }\n    }\n\n    // Create a hidden form for guest login\n    const form = document.createElement('form')\n    form.method = 'POST'\n    form.action = '/login/index.php'\n    form.style.display = 'none'\n\n    // Add form fields for guest login\n    const fields = {\n      'username': 'guest',\n      'password': 'guest',\n      'logintoken': loginToken\n    }\n\n    Object.entries(fields).forEach(([name, value]) => {\n      const input = document.createElement('input')\n      input.type = 'hidden'\n      input.name = name\n      input.value = value\n      form.appendChild(input)\n    })\n\n    // Append form to body and submit\n    document.body.appendChild(form)\n    form.submit()\n\n    return {\n      success: true,\n      message: 'Logging in as guest...'\n    }\n\n  } catch (error: any) {\n    console.error('Guest login error:', error)\n    return {\n      success: false,\n      message: 'An error occurred during guest login.'\n    }\n  }\n}\n\n/**\n * Get login token from Moodle's session\n * This token is required for CSRF protection\n */\nasync function getLoginToken(): Promise<string> {\n  try {\n    // Fetch the login page to get the token\n    const response = await fetch('/login/index.php?traditional=1', {\n      method: 'GET',\n      credentials: 'same-origin',\n      headers: {\n        'Accept': 'text/html'\n      }\n    })\n\n    if (!response.ok) {\n      console.error('Failed to fetch login page:', response.status)\n      return ''\n    }\n\n    const html = await response.text()\n\n    // Extract logintoken from the HTML\n    const tokenMatch = html.match(/name=\"logintoken\"\\s+value=\"([^\"]+)\"/)\n\n    if (tokenMatch && tokenMatch[1]) {\n      console.log('Login token retrieved successfully')\n      return tokenMatch[1]\n    }\n\n    console.warn('Login token not found in response')\n    return ''\n\n  } catch (error) {\n    console.error('Error getting login token:', error)\n    return ''\n  }\n}\n","import { ref } from 'vue'\nimport { loginUser, loginGuest } from '../utils/api'\n\ninterface LoginCredentials {\n  username: string\n  password: string\n  rememberMe: boolean\n}\n\nexport function useAuth() {\n  const isAuthenticated = ref(false)\n  const user = ref(null)\n  const error = ref<string | null>(null)\n\n  const login = async (credentials: LoginCredentials) => {\n    error.value = null\n\n    try {\n      // This will submit the form and redirect to dashboard\n      const response = await loginUser(credentials)\n\n      if (!response.success) {\n        throw new Error(response.message || 'Login failed')\n      }\n\n      // If we reach here, the form has been submitted\n      // The page will redirect automatically via Moodle\n      isAuthenticated.value = true\n\n    } catch (err: any) {\n      error.value = err.message || 'An error occurred during login'\n      throw err\n    }\n  }\n\n  const loginAsGuest = async () => {\n    error.value = null\n\n    try {\n      // This will submit the guest login form\n      const response = await loginGuest()\n\n      if (!response.success) {\n        throw new Error(response.message || 'Guest login failed')\n      }\n\n      // Form submitted, page will redirect\n      return response\n\n    } catch (err: any) {\n      error.value = err.message || 'An error occurred during guest login'\n      throw err\n    }\n  }\n\n  const logout = () => {\n    isAuthenticated.value = false\n    user.value = null\n    window.location.href = '/login/logout.php'\n  }\n\n  return {\n    isAuthenticated,\n    user,\n    error,\n    login,\n    loginAsGuest,\n    logout\n  }\n}\n","/**\n * Form validation utilities\n */\n\n/**\n * Validate username\n */\nexport function validateUsername(username: string): string {\n  if (!username || username.trim() === '') {\n    return 'Username is required'\n  }\n\n  if (username.length < 2) {\n    return 'Username must be at least 2 characters'\n  }\n\n  if (username.length > 100) {\n    return 'Username is too long'\n  }\n\n  return ''\n}\n\n/**\n * Validate password\n */\nexport function validatePassword(password: string): string {\n  if (!password || password === '') {\n    return 'Password is required'\n  }\n\n  if (password.length < 1) {\n    return 'Password is required'\n  }\n\n  return ''\n}\n\n/**\n * Validate email format\n */\nexport function validateEmail(email: string): string {\n  if (!email || email.trim() === '') {\n    return 'Email is required'\n  }\n\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n\n  if (!emailRegex.test(email)) {\n    return 'Please enter a valid email address'\n  }\n\n  return ''\n}\n\n/**\n * Sanitize input to prevent XSS\n */\nexport function sanitizeInput(input: string): string {\n  const div = document.createElement('div')\n  div.textContent = input\n  return div.innerHTML\n}\n","<template>\n  <div class=\"login-page-exact\">\n    <!-- Page Banner (matching Moodle design) -->\n    <div class=\"page-banner-area bg-secondary py-60 position-relative z-1 overflow-hidden\">\n      <div class=\"container\">\n        <div class=\"row align-items-center\">\n          <div class=\"col-lg-6 col-sm-6\">\n            <div class=\"page-banner-content text-sm-start text-center mb-4 mb-sm-0\">\n              <h2 class=\"fs-2 text-white mb-md-3 mb-1\">Log in to the site</h2>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Login Area (matching Moodle design exactly) -->\n    <div class=\"login-area\">\n      <div class=\"container\">\n        <div class=\"row\">\n          <div class=\"col-12\">\n            <div class=\"login-wrapper pt-100 pb-75\">\n              <div class=\"login-container\">\n                <div class=\"loginform\">\n                  <!-- Login Logo -->\n                  <div id=\"loginlogo\" class=\"login-logo\">\n                    <img\n                      id=\"logoimage\"\n                      src=\"https://dev.bheem.cloud/pluginfile.php?file=%2F1%2Fcore_admin%2Flogo%2F0x200%2F-1%2Flogo.png\"\n                      class=\"img-fluid\"\n                      alt=\"Bheem Academy : : AI-Driven Learning for a Smarter\"\n                    />\n                    <h1 class=\"login-heading visually-hidden\">\n                      Log in to Bheem Academy : : AI-Driven Learning for a Smarter\n                    </h1>\n                  </div>\n\n                  <!-- Login Form -->\n                  <form\n                    class=\"login-form\"\n                    @submit.prevent=\"handleLogin\"\n                    method=\"post\"\n                    id=\"login\"\n                    novalidate\n                  >\n                    <input id=\"anchor\" type=\"hidden\" name=\"anchor\" value=\"\" />\n\n                    <!-- Username Field -->\n                    <div class=\"login-form-username mb-3\">\n                      <label for=\"username\" class=\"visually-hidden\">Username</label>\n                      <input\n                        type=\"text\"\n                        name=\"username\"\n                        id=\"username\"\n                        v-model=\"formData.username\"\n                        class=\"form-control form-control-lg\"\n                        :class=\"{ 'is-invalid': errors.username }\"\n                        placeholder=\"Username\"\n                        autocomplete=\"username\"\n                        @blur=\"validateField('username')\"\n                      />\n                      <div v-if=\"errors.username\" class=\"invalid-feedback\">\n                        {{ errors.username }}\n                      </div>\n                    </div>\n\n                    <!-- Password Field -->\n                    <div class=\"login-form-password mb-3\">\n                      <label for=\"password\" class=\"visually-hidden\">Password</label>\n                      <input\n                        :type=\"showPassword ? 'text' : 'password'\"\n                        name=\"password\"\n                        id=\"password\"\n                        v-model=\"formData.password\"\n                        class=\"form-control form-control-lg\"\n                        :class=\"{ 'is-invalid': errors.password }\"\n                        placeholder=\"Password\"\n                        autocomplete=\"current-password\"\n                        @blur=\"validateField('password')\"\n                      />\n                      <div v-if=\"errors.password\" class=\"invalid-feedback\">\n                        {{ errors.password }}\n                      </div>\n                    </div>\n\n                    <!-- Error Message -->\n                    <div v-if=\"loginError\" class=\"alert alert-danger\" role=\"alert\">\n                      {{ loginError }}\n                    </div>\n\n                    <!-- Submit Button -->\n                    <div class=\"login-form-submit mb-3\">\n                      <button\n                        class=\"btn btn-primary btn-lg\"\n                        type=\"submit\"\n                        id=\"loginbtn\"\n                        :disabled=\"isLoading\"\n                      >\n                        {{ isLoading ? 'Logging in...' : 'Log in' }}\n                      </button>\n                    </div>\n\n                    <!-- Forgot Password Link -->\n                    <div class=\"login-form-forgotpassword mb-3\">\n                      <a href=\"/login/forgot_password.php\">Lost password?</a>\n                    </div>\n                  </form>\n\n                  <!-- Divider -->\n                  <div class=\"login-divider\"></div>\n\n                  <!-- Guest Login -->\n                  <h2 class=\"login-heading\">Some courses may allow guest access</h2>\n                  <form @submit.prevent=\"handleGuestLogin\" id=\"guestlogin\">\n                    <button\n                      class=\"btn btn-secondary\"\n                      type=\"submit\"\n                      id=\"loginguestbtn\"\n                      :disabled=\"isLoading\"\n                    >\n                      Access as a guest\n                    </button>\n                  </form>\n\n                  <!-- Divider -->\n                  <div class=\"login-divider\"></div>\n\n                  <!-- Cookies Notice -->\n                  <div class=\"d-flex\">\n                    <button\n                      type=\"button\"\n                      class=\"btn btn-secondary\"\n                      @click=\"showCookiesNotice\"\n                    >\n                      Cookies notice\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, reactive, onMounted } from 'vue'\nimport { useAuth } from '../../composables/useAuth'\nimport { validateUsername, validatePassword } from '../../utils/validation'\n\nconst { login, loginAsGuest } = useAuth()\n\nconst formData = reactive({\n  username: '',\n  password: '',\n  rememberMe: false\n})\n\nconst errors = reactive({\n  username: '',\n  password: ''\n})\n\nconst showPassword = ref(false)\nconst isLoading = ref(false)\nconst loginError = ref('')\n\nonMounted(() => {\n  // Set anchor value from hash\n  const anchorInput = document.getElementById('anchor') as HTMLInputElement\n  if (anchorInput) {\n    anchorInput.value = location.hash\n  }\n})\n\nconst validateField = (field: 'username' | 'password') => {\n  if (field === 'username') {\n    errors.username = validateUsername(formData.username)\n  } else if (field === 'password') {\n    errors.password = validatePassword(formData.password)\n  }\n}\n\nconst validateForm = (): boolean => {\n  errors.username = validateUsername(formData.username)\n  errors.password = validatePassword(formData.password)\n\n  return !errors.username && !errors.password\n}\n\nconst handleLogin = async () => {\n  loginError.value = ''\n\n  if (!validateForm()) {\n    return\n  }\n\n  isLoading.value = true\n\n  try {\n    await login({\n      username: formData.username,\n      password: formData.password,\n      rememberMe: formData.rememberMe\n    })\n  } catch (error: any) {\n    loginError.value = error.message || 'Invalid login credentials. Please try again.'\n  } finally {\n    isLoading.value = false\n  }\n}\n\nconst handleGuestLogin = async () => {\n  isLoading.value = true\n  loginError.value = ''\n\n  try {\n    await loginAsGuest()\n  } catch (error: any) {\n    loginError.value = error.message || 'Guest login is not available.'\n  } finally {\n    isLoading.value = false\n  }\n}\n\nconst showCookiesNotice = () => {\n  alert('Cookies notice: This site uses cookies to ensure you get the best experience on our website.')\n}\n</script>\n\n<style scoped>\n/* Exact styles matching Moodle theme */\n.login-page-exact {\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, \"Helvetica Neue\", Arial, sans-serif;\n  line-height: 1.5;\n  color: #212529;\n}\n\n/* Page Banner */\n.page-banner-area {\n  background-color: #126849 !important;\n}\n\n.bg-secondary {\n  background-color: #126849 !important;\n}\n\n.py-60 {\n  padding-top: 3.75rem !important;\n  padding-bottom: 3.75rem !important;\n}\n\n.position-relative {\n  position: relative !important;\n}\n\n.z-1 {\n  z-index: 1 !important;\n}\n\n.overflow-hidden {\n  overflow: hidden !important;\n}\n\n.text-white {\n  color: #fff !important;\n}\n\n.fs-2 {\n  font-size: calc(1.325rem + .9vw) !important;\n}\n\n.mb-md-3 {\n  margin-bottom: 1rem !important;\n}\n\n.mb-1 {\n  margin-bottom: 0.25rem !important;\n}\n\n/* Login Area */\n.login-area {\n  padding-top: 50px;\n  padding-bottom: 20px;\n}\n\n.login-wrapper {\n  padding-top: 100px;\n  padding-bottom: 75px;\n}\n\n.pt-100 {\n  padding-top: 100px;\n}\n\n.pb-75 {\n  padding-bottom: 75px;\n}\n\n.login-container {\n  max-width: 500px;\n  margin: 0 auto;\n  padding: 40px;\n  background: #fff;\n  border-radius: 8px;\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n}\n\n.loginform {\n  width: 100%;\n}\n\n/* Login Logo */\n.login-logo {\n  text-align: center;\n  margin-bottom: 30px;\n}\n\n.login-logo img {\n  max-width: 200px;\n  height: auto;\n}\n\n.login-heading {\n  font-size: 20px;\n  font-weight: 600;\n  color: #212529;\n  margin-bottom: 20px;\n  text-align: center;\n}\n\n.visually-hidden {\n  position: absolute !important;\n  width: 1px !important;\n  height: 1px !important;\n  padding: 0 !important;\n  margin: -1px !important;\n  overflow: hidden !important;\n  clip: rect(0, 0, 0, 0) !important;\n  white-space: nowrap !important;\n  border: 0 !important;\n}\n\n/* Form Styles */\n.login-form {\n  width: 100%;\n}\n\n.mb-3 {\n  margin-bottom: 1rem !important;\n}\n\n.form-control {\n  display: block;\n  width: 100%;\n  padding: 0.375rem 0.75rem;\n  font-size: 1rem;\n  font-weight: 400;\n  line-height: 1.5;\n  color: #212529;\n  background-color: #fff;\n  background-clip: padding-box;\n  border: 1px solid #ced4da;\n  appearance: none;\n  border-radius: 0.25rem;\n  transition: border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n}\n\n.form-control-lg {\n  min-height: calc(1.5em + 1rem + 2px);\n  padding: 0.5rem 1rem;\n  font-size: 1.25rem;\n  border-radius: 0.3rem;\n}\n\n.form-control:focus {\n  color: #212529;\n  background-color: #fff;\n  border-color: #126849;\n  outline: 0;\n  box-shadow: 0 0 0 0.25rem rgba(18, 104, 73, 0.25);\n}\n\n.form-control.is-invalid {\n  border-color: #dc3545;\n  padding-right: calc(1.5em + 0.75rem);\n  background-image: url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath stroke-linejoin='round' d='M5.8 3.6h.4L6 6.5z'/%3e%3ccircle cx='6' cy='8.2' r='.6' fill='%23dc3545' stroke='none'/%3e%3c/svg%3e\");\n  background-repeat: no-repeat;\n  background-position: right calc(0.375em + 0.1875rem) center;\n  background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);\n}\n\n.invalid-feedback {\n  display: block;\n  margin-top: 0.25rem;\n  font-size: 0.875em;\n  color: #dc3545;\n}\n\n/* Buttons */\n.btn {\n  display: inline-block;\n  font-weight: 400;\n  line-height: 1.5;\n  color: #212529;\n  text-align: center;\n  text-decoration: none;\n  vertical-align: middle;\n  cursor: pointer;\n  user-select: none;\n  background-color: transparent;\n  border: 1px solid transparent;\n  padding: 0.375rem 0.75rem;\n  font-size: 1rem;\n  border-radius: 0.25rem;\n  transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out,\n    border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;\n}\n\n.btn-lg {\n  padding: 0.5rem 1rem;\n  font-size: 1.25rem;\n  border-radius: 0.3rem;\n  width: 100%;\n}\n\n.btn-primary {\n  color: #fff;\n  background-color: #126849;\n  border-color: #126849;\n}\n\n.btn-primary:hover {\n  color: #fff;\n  background-color: #0d4933;\n  border-color: #0d4933;\n}\n\n.btn-primary:focus {\n  color: #fff;\n  background-color: #0d4933;\n  border-color: #0d4933;\n  box-shadow: 0 0 0 0.25rem rgba(18, 104, 73, 0.5);\n}\n\n.btn-primary:disabled {\n  color: #fff;\n  background-color: #126849;\n  border-color: #126849;\n  opacity: 0.65;\n  cursor: not-allowed;\n}\n\n.btn-secondary {\n  color: #fff;\n  background-color: #6c757d;\n  border-color: #6c757d;\n  width: 100%;\n}\n\n.btn-secondary:hover {\n  color: #fff;\n  background-color: #5c636a;\n  border-color: #565e64;\n}\n\n.btn-secondary:focus {\n  color: #fff;\n  background-color: #5c636a;\n  border-color: #565e64;\n  box-shadow: 0 0 0 0.25rem rgba(130, 138, 145, 0.5);\n}\n\n/* Links */\n.login-form-forgotpassword a {\n  color: #126849;\n  text-decoration: none;\n}\n\n.login-form-forgotpassword a:hover {\n  color: #0d4933;\n  text-decoration: underline;\n}\n\n/* Divider */\n.login-divider {\n  height: 1px;\n  background-color: #dee2e6;\n  margin: 30px 0;\n}\n\n/* Alert */\n.alert {\n  position: relative;\n  padding: 1rem 1rem;\n  margin-bottom: 1rem;\n  border: 1px solid transparent;\n  border-radius: 0.25rem;\n}\n\n.alert-danger {\n  color: #842029;\n  background-color: #f8d7da;\n  border-color: #f5c2c7;\n}\n\n/* Responsive */\n@media (max-width: 768px) {\n  .login-container {\n    padding: 30px 15px;\n  }\n\n  .login-heading {\n    font-size: 18px;\n  }\n\n  .page-banner-area .fs-2 {\n    font-size: 1.5rem !important;\n  }\n}\n\n@media (max-width: 576px) {\n  .login-wrapper {\n    padding-top: 50px;\n    padding-bottom: 50px;\n  }\n\n  .login-container {\n    padding: 20px;\n    box-shadow: none;\n  }\n}\n</style>\n","<template>\n  <div id=\"app\" class=\"app-container\">\n    <LoginPage />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport LoginPage from './components/auth/LoginPage.vue'\n</script>\n\n<style>\n@import './assets/styles/global.css';\n</style>\n","import { createApp } from 'vue'\nimport App from './App.vue'\n\nconst app = createApp(App)\n\napp.mount('#app')\n"],"names":["loginUser","credentials","loginToken","getLoginToken","form","fields","name","value","input","error","loginGuest","response","tokenMatch","useAuth","isAuthenticated","ref","user","err","validateUsername","username","validatePassword","password","login","loginAsGuest","formData","reactive","errors","showPassword","isLoading","loginError","onMounted","anchorInput","validateField","field","validateForm","handleLogin","handleGuestLogin","showCookiesNotice","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_cache","$event","_normalizeClass","_vModelText","_hoisted_10","_toDisplayString","_hoisted_11","_vModelDynamic","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_createVNode","LoginPage","app","createApp","App"],"mappings":"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"}