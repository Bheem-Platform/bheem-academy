import{r as f,d as P,a as k,c as m,o as p,b as s,e as x,F as O,f as j,w as N,g as y,h as b,v as T,n as v,i as g,t as h,j as U,k as V,l as D,m as I,p as W}from"./vue-Du6AWdYU.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function l(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(t){if(t.ep)return;t.ep=!0;const r=l(t);fetch(t.href,r)}})();async function q(o){try{const a=await A();if(!a)return{success:!1,message:"Could not retrieve login token. Please refresh the page and try again."};const l=document.createElement("form");l.method="POST",l.action="/login/index.php",l.style.display="none";const i={username:o.username.toLowerCase().trim(),password:o.password,rememberusername:o.rememberMe?"1":"0",logintoken:a,anchor:location.hash};return Object.entries(i).forEach(([t,r])=>{const n=document.createElement("input");n.type="hidden",n.name=t,n.value=r,l.appendChild(n)}),document.body.appendChild(l),l.submit(),{success:!0,message:"Logging in..."}}catch(a){return console.error("Login error:",a),{success:!1,message:a.message||"An error occurred during login. Please try again."}}}async function J(){try{const o=await A();if(!o)return{success:!1,message:"Could not retrieve login token. Please refresh the page and try again."};const a=document.createElement("form");return a.method="POST",a.action="/login/index.php",a.style.display="none",Object.entries({username:"guest",password:"guest",logintoken:o}).forEach(([i,t])=>{const r=document.createElement("input");r.type="hidden",r.name=i,r.value=t,a.appendChild(r)}),document.body.appendChild(a),a.submit(),{success:!0,message:"Logging in as guest..."}}catch(o){return console.error("Guest login error:",o),{success:!1,message:"An error occurred during guest login."}}}async function A(){try{const o=await fetch("/login-vue/api/get-login-token.php",{method:"GET",credentials:"same-origin",headers:{Accept:"application/json"}});if(!o.ok)return console.error("Failed to fetch login token from API:",o.status),"";const a=await o.json();return a.success&&a.logintoken?(console.log(a.message),a.logintoken):(console.warn("Login token not found in API response"),"")}catch(o){return console.error("Error getting login token:",o),""}}function Q(){const o=f(!1),a=f(null),l=f(null);return{isAuthenticated:o,user:a,error:l,login:async n=>{l.value=null;try{const c=await q(n);if(!c.success)throw new Error(c.message||"Login failed");o.value=!0}catch(c){throw l.value=c.message||"An error occurred during login",c}},loginAsGuest:async()=>{l.value=null;try{const n=await J();if(!n.success)throw new Error(n.message||"Guest login failed");return n}catch(n){throw l.value=n.message||"An error occurred during guest login",n}},logout:()=>{o.value=!1,a.value=null,window.location.href="/login/logout.php"}}}function L(o){return!o||o.trim()===""?"Username is required":o.length<2?"Username must be at least 2 characters":o.length>100?"Username is too long":""}function C(o){return!o||o===""||o.length<1?"Password is required":""}const X={class:"modern-login-page"},Y={class:"animated-background"},z={class:"particles"},K={class:"login-container-wrapper"},R={class:"login-glass-card"},H={class:"form-group"},Z={class:"input-wrapper"},ee={key:0,class:"error-text"},se={class:"form-group"},te={class:"input-wrapper"},oe=["type"],ae={key:0,class:"error-text"},ne={class:"form-options"},re={class:"remember-checkbox"},ie={key:0,class:"error-alert"},le=["disabled"],de={key:0,class:"button-content"},ce={key:1,class:"button-content"},ue=["disabled"],me=P({__name:"LoginPage",setup(o){const{login:a,loginAsGuest:l}=Q(),i=k({username:"",password:"",rememberMe:!1}),t=k({username:"",password:""}),r=f(!1),n=f(!1),c=f(""),G=u=>{const e=Math.random()*4+2,d=Math.random()*20+10,S=Math.random()*5,$=Math.random()*100,B=Math.random()*100;return{width:`${e}px`,height:`${e}px`,left:`${$}%`,top:`${B}%`,animationDuration:`${d}s`,animationDelay:`${S}s`}},w=u=>{u==="username"?t.username=L(i.username):u==="password"&&(t.password=C(i.password))},M=()=>(t.username=L(i.username),t.password=C(i.password),!t.username&&!t.password),_=async()=>{if(c.value="",!!M()){n.value=!0;try{await a({username:i.username,password:i.password,rememberMe:i.rememberMe})}catch(u){c.value=u.message||"Invalid login credentials. Please try again.",n.value=!1}}},F=async()=>{n.value=!0,c.value="";try{await l()}catch(u){c.value=u.message||"Guest login is not available.",n.value=!1}},E=()=>{alert("Cookies notice: This site uses cookies to ensure you get the best experience on our website.")};return(u,e)=>(p(),m("div",X,[s("div",Y,[e[8]||(e[8]=x('<div class="bg-overlay" data-v-2f608fe7></div><div class="floating-images" data-v-2f608fe7><div class="bg-image image-1" data-v-2f608fe7><img src="https://imagedelivery.net/GSYWs1kbpG8XypJe3mjC0Q/05f05403-bb6c-45af-6d4a-8e2656951f00/public" alt="Background 1" data-v-2f608fe7></div><div class="bg-image image-2" data-v-2f608fe7><img src="https://imagedelivery.net/GSYWs1kbpG8XypJe3mjC0Q/0932ca04-4388-4f6e-fcdd-9cd13f451300/public" alt="Background 2" data-v-2f608fe7></div><div class="bg-image image-3" data-v-2f608fe7><img src="https://imagedelivery.net/GSYWs1kbpG8XypJe3mjC0Q/33f62e15-35d5-4ca5-5077-b0076e244b00/public" alt="Background 3" data-v-2f608fe7></div><div class="bg-image image-4" data-v-2f608fe7><img src="https://imagedelivery.net/GSYWs1kbpG8XypJe3mjC0Q/90a4f6ec-2bdb-4a76-20d3-505cdfaf9700/public" alt="Background 4" data-v-2f608fe7></div></div><div class="gradient-overlay" data-v-2f608fe7></div>',3)),s("div",z,[(p(),m(O,null,j(15,d=>s("div",{class:"particle",key:d,style:D(G())},null,4)),64))]),e[9]||(e[9]=s("div",{class:"light-rays"},[s("div",{class:"ray ray-1"}),s("div",{class:"ray ray-2"}),s("div",{class:"ray ray-3"})],-1))]),s("div",K,[s("div",R,[e[23]||(e[23]=x('<div class="logo-section" data-v-2f608fe7><div class="logo-circle" data-v-2f608fe7><img src="https://dev.bheem.cloud/pluginfile.php?file=%2F1%2Ftheme_edoo%2Fmain_logo%2F-1%2Flogo.png" alt="Bheem Academy" class="logo-image" data-v-2f608fe7></div><h1 class="welcome-title" data-v-2f608fe7> Welcome to <span class="gradient-text" data-v-2f608fe7>Bheem Academy</span></h1><p class="welcome-subtitle" data-v-2f608fe7>AI-Driven Learning for a Smarter Future</p></div>',1)),s("form",{onSubmit:N(_,["prevent"]),class:"modern-login-form",novalidate:""},[s("div",H,[s("div",Z,[e[10]||(e[10]=s("div",{class:"input-icon"},[s("i",{class:"fas fa-user"})],-1)),b(s("input",{type:"text",id:"username","onUpdate:modelValue":e[0]||(e[0]=d=>i.username=d),class:v(["modern-input",{"has-error":t.username}]),placeholder:"Username",autocomplete:"username",onBlur:e[1]||(e[1]=d=>w("username")),onFocus:e[2]||(e[2]=d=>t.username="")},null,34),[[T,i.username]])]),t.username?(p(),m("div",ee,[e[11]||(e[11]=s("i",{class:"fas fa-exclamation-circle"},null,-1)),g(" "+h(t.username),1)])):y("",!0)]),s("div",se,[s("div",te,[e[12]||(e[12]=s("div",{class:"input-icon"},[s("i",{class:"fas fa-lock"})],-1)),b(s("input",{type:r.value?"text":"password",id:"password","onUpdate:modelValue":e[3]||(e[3]=d=>i.password=d),class:v(["modern-input",{"has-error":t.password}]),placeholder:"Password",autocomplete:"current-password",onBlur:e[4]||(e[4]=d=>w("password")),onFocus:e[5]||(e[5]=d=>t.password="")},null,42,oe),[[U,i.password]]),s("button",{type:"button",class:"password-toggle",onClick:e[6]||(e[6]=d=>r.value=!r.value),tabindex:"-1"},[s("i",{class:v(r.value?"fas fa-eye-slash":"fas fa-eye")},null,2)])]),t.password?(p(),m("div",ae,[e[13]||(e[13]=s("i",{class:"fas fa-exclamation-circle"},null,-1)),g(" "+h(t.password),1)])):y("",!0)]),s("div",ne,[s("label",re,[b(s("input",{type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=d=>i.rememberMe=d)},null,512),[[V,i.rememberMe]]),e[14]||(e[14]=s("span",{class:"checkmark"},null,-1)),e[15]||(e[15]=s("span",{class:"checkbox-label"},"Remember me",-1))]),e[16]||(e[16]=s("a",{href:"/login/forgot_password.php",class:"forgot-link"}," Lost password? ",-1))]),c.value?(p(),m("div",ie,[e[17]||(e[17]=s("i",{class:"fas fa-exclamation-triangle"},null,-1)),s("span",null,h(c.value),1)])):y("",!0),s("button",{type:"submit",class:v(["login-button",{loading:n.value}]),disabled:n.value},[n.value?(p(),m("span",ce,[...e[19]||(e[19]=[s("span",{class:"spinner"},null,-1),g(" Logging in... ",-1)])])):(p(),m("span",de,[...e[18]||(e[18]=[s("i",{class:"fas fa-sign-in-alt"},null,-1),g(" Log in ",-1)])]))],10,le),e[21]||(e[21]=s("div",{class:"divider"},[s("span",null,"or")],-1)),s("button",{type:"button",onClick:F,class:"guest-button",disabled:n.value},[...e[20]||(e[20]=[s("i",{class:"fas fa-user-shield"},null,-1),g(" Access as a guest ",-1)])],8,ue)],32),s("div",{class:"card-footer"},[s("button",{type:"button",class:"cookies-link",onClick:E},[...e[22]||(e[22]=[s("i",{class:"fas fa-cookie-bite"},null,-1),g(" Cookies notice ",-1)])])])]),e[24]||(e[24]=s("div",{class:"decorative-elements"},[s("div",{class:"deco-circle circle-1"}),s("div",{class:"deco-circle circle-2"}),s("div",{class:"deco-circle circle-3"})],-1))])]))}}),pe=(o,a)=>{const l=o.__vccOpts||o;for(const[i,t]of a)l[i]=t;return l},ge=pe(me,[["__scopeId","data-v-2f608fe7"]]),fe={id:"app",class:"app-container"},ve=P({__name:"App",setup(o){return(a,l)=>(p(),m("div",fe,[I(ge)]))}}),ye=W(ve);ye.mount("#app");
//# sourceMappingURL=index-Cb8iLtX5.js.map
