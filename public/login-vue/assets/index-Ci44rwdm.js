import{r as u,d as A,a as w,o as M,c as g,b as p,e as T,f as o,w as y,g as v,h as b,v as E,n as _,t as f,i as I,j as S,k as U}from"./vue-DWqZH9f_.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const d of e)if(d.type==="childList")for(const a of d.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(e){const d={};return e.integrity&&(d.integrity=e.integrity),e.referrerPolicy&&(d.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?d.credentials="include":e.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function n(e){if(e.ep)return;e.ep=!0;const d=r(e);fetch(e.href,d)}})();async function B(s){try{const i=await D(),r=new FormData;r.append("username",s.username.toLowerCase().trim()),r.append("password",s.password),r.append("rememberusername",s.rememberMe?"1":"0"),r.append("logintoken",i);const n=await fetch("/login/index.php",{method:"POST",body:r,credentials:"same-origin",headers:{Accept:"text/html,application/xhtml+xml,application/xml"}});if(n.redirected)return{success:!0,redirect:n.url};const e=await n.text();return e.includes("Invalid login")||e.includes("invalidlogin")?{success:!1,message:"Invalid username or password. Please try again."}:e.includes("Too many login attempts")?{success:!1,message:"Too many failed login attempts. Please try again later."}:{success:!1,message:"Login failed. Please check your credentials and try again."}}catch(i){return console.error("Login error:",i),{success:!1,message:i.message||"An error occurred during login. Please try again."}}}async function C(){try{const s=await fetch("/login/index.php?guest=1",{method:"GET",credentials:"same-origin",redirect:"follow"});return s.redirected||s.ok?{success:!0,redirect:s.url||"/"}:{success:!1,message:"Guest login is not available at this time."}}catch(s){return console.error("Guest login error:",s),{success:!1,message:"An error occurred during guest login."}}}async function D(){try{const r=(await(await fetch("/login/index.php",{method:"GET",credentials:"same-origin"})).text()).match(/name="logintoken"\s+value="([^"]+)"/);return r&&r[1]?r[1]:""}catch(s){return console.error("Error getting login token:",s),""}}function N(){const s=u(!1),i=u(null),r=u(null);return{isAuthenticated:s,user:i,error:r,login:async a=>{r.value=null;try{const l=await B(a);if(l.success)s.value=!0,i.value=l.user,l.redirect?window.location.href=l.redirect:window.location.href="/my/";else throw new Error(l.message||"Login failed")}catch(l){throw r.value=l.message||"An error occurred during login",l}},loginAsGuest:async()=>{r.value=null;try{const a=await C();if(a.success)window.location.href=a.redirect||"/";else throw new Error(a.message||"Guest login failed")}catch(a){throw r.value=a.message||"An error occurred during guest login",a}},logout:()=>{s.value=!1,i.value=null,window.location.href="/login/logout.php"}}}function x(s){return!s||s.trim()===""?"Username is required":s.length<2?"Username must be at least 2 characters":s.length>100?"Username is too long":""}function L(s){return!s||s===""||s.length<1?"Password is required":""}const O={class:"login-page-exact"},V={class:"login-area"},q={class:"container"},$={class:"row"},z={class:"col-12"},j={class:"login-wrapper pt-100 pb-75"},K={class:"login-container"},H={class:"loginform"},J={class:"login-form-username mb-3"},Q={key:0,class:"invalid-feedback"},R={class:"login-form-password mb-3"},W=["type"],X={key:0,class:"invalid-feedback"},Y={key:0,class:"alert alert-danger",role:"alert"},Z={class:"login-form-submit mb-3"},ee=["disabled"],se=["disabled"],oe=A({__name:"LoginPage",setup(s){const{login:i,loginAsGuest:r}=N(),n=w({username:"",password:"",rememberMe:!1}),e=w({username:"",password:""}),d=u(!1),a=u(!1),l=u("");M(()=>{const c=document.getElementById("anchor");c&&(c.value=location.hash)});const h=c=>{c==="username"?e.username=x(n.username):c==="password"&&(e.password=L(n.password))},P=()=>(e.username=x(n.username),e.password=L(n.password),!e.username&&!e.password),k=async()=>{if(l.value="",!!P()){a.value=!0;try{await i({username:n.username,password:n.password,rememberMe:n.rememberMe})}catch(c){l.value=c.message||"Invalid login credentials. Please try again."}finally{a.value=!1}}},G=async()=>{a.value=!0,l.value="";try{await r()}catch(c){l.value=c.message||"Guest login is not available."}finally{a.value=!1}},F=()=>{alert("Cookies notice: This site uses cookies to ensure you get the best experience on our website.")};return(c,t)=>(p(),g("div",O,[t[12]||(t[12]=T('<div class="page-banner-area bg-secondary py-60 position-relative z-1 overflow-hidden" data-v-b7648e92><div class="container" data-v-b7648e92><div class="row align-items-center" data-v-b7648e92><div class="col-lg-6 col-sm-6" data-v-b7648e92><div class="page-banner-content text-sm-start text-center mb-4 mb-sm-0" data-v-b7648e92><h2 class="fs-2 text-white mb-md-3 mb-1" data-v-b7648e92>Log in to the site</h2></div></div></div></div></div>',1)),o("div",V,[o("div",q,[o("div",$,[o("div",z,[o("div",j,[o("div",K,[o("div",H,[t[8]||(t[8]=o("div",{id:"loginlogo",class:"login-logo"},[o("img",{id:"logoimage",src:"https://dev.bheem.cloud/pluginfile.php?file=%2F1%2Fcore_admin%2Flogo%2F0x200%2F-1%2Flogo.png",class:"img-fluid",alt:"Bheem Academy : : AI-Driven Learning for a Smarter"}),o("h1",{class:"login-heading visually-hidden"}," Log in to Bheem Academy : : AI-Driven Learning for a Smarter ")],-1)),o("form",{class:"login-form",onSubmit:y(k,["prevent"]),method:"post",id:"login",novalidate:""},[t[6]||(t[6]=o("input",{id:"anchor",type:"hidden",name:"anchor",value:""},null,-1)),o("div",J,[t[4]||(t[4]=o("label",{for:"username",class:"visually-hidden"},"Username",-1)),b(o("input",{type:"text",name:"username",id:"username","onUpdate:modelValue":t[0]||(t[0]=m=>n.username=m),class:_(["form-control form-control-lg",{"is-invalid":e.username}]),placeholder:"Username",autocomplete:"username",onBlur:t[1]||(t[1]=m=>h("username"))},null,34),[[E,n.username]]),e.username?(p(),g("div",Q,f(e.username),1)):v("",!0)]),o("div",R,[t[5]||(t[5]=o("label",{for:"password",class:"visually-hidden"},"Password",-1)),b(o("input",{type:d.value?"text":"password",name:"password",id:"password","onUpdate:modelValue":t[2]||(t[2]=m=>n.password=m),class:_(["form-control form-control-lg",{"is-invalid":e.password}]),placeholder:"Password",autocomplete:"current-password",onBlur:t[3]||(t[3]=m=>h("password"))},null,42,W),[[I,n.password]]),e.password?(p(),g("div",X,f(e.password),1)):v("",!0)]),l.value?(p(),g("div",Y,f(l.value),1)):v("",!0),o("div",Z,[o("button",{class:"btn btn-primary btn-lg",type:"submit",id:"loginbtn",disabled:a.value},f(a.value?"Logging in...":"Log in"),9,ee)]),t[7]||(t[7]=o("div",{class:"login-form-forgotpassword mb-3"},[o("a",{href:"/login/forgot_password.php"},"Lost password?")],-1))],32),t[9]||(t[9]=o("div",{class:"login-divider"},null,-1)),t[10]||(t[10]=o("h2",{class:"login-heading"},"Some courses may allow guest access",-1)),o("form",{onSubmit:y(G,["prevent"]),id:"guestlogin"},[o("button",{class:"btn btn-secondary",type:"submit",id:"loginguestbtn",disabled:a.value}," Access as a guest ",8,se)],32),t[11]||(t[11]=o("div",{class:"login-divider"},null,-1)),o("div",{class:"d-flex"},[o("button",{type:"button",class:"btn btn-secondary",onClick:F}," Cookies notice ")])])])])])])])])]))}}),te=(s,i)=>{const r=s.__vccOpts||s;for(const[n,e]of i)r[n]=e;return r},re=te(oe,[["__scopeId","data-v-b7648e92"]]),ne={id:"app",class:"app-container"},ae=A({__name:"App",setup(s){return(i,r)=>(p(),g("div",ne,[S(re)]))}}),ie=U(ae);ie.mount("#app");
//# sourceMappingURL=index-Ci44rwdm.js.map
