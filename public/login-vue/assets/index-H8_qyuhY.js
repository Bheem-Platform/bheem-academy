import{r as f,d as M,a as k,c as p,o as m,b as s,e as x,F as N,f as S,w as T,g as h,h as w,v as U,n as v,i as g,t as y,j as B,k as D,l as q,m as I,p as j}from"./vue-Du6AWdYU.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const n of i.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function a(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(t){if(t.ep)return;t.ep=!0;const i=a(t);fetch(t.href,i)}})();async function z(o){try{const r=await A();if(!r)return{success:!1,message:"Could not retrieve login token. Please refresh the page and try again."};const a=document.createElement("form");a.method="POST",a.action="/login/index.php",a.style.display="none";const l={username:o.username.toLowerCase().trim(),password:o.password,rememberusername:o.rememberMe?"1":"0",logintoken:r,anchor:location.hash};return Object.entries(l).forEach(([t,i])=>{const n=document.createElement("input");n.type="hidden",n.name=t,n.value=i,a.appendChild(n)}),document.body.appendChild(a),a.submit(),{success:!0,message:"Logging in..."}}catch(r){return console.error("Login error:",r),{success:!1,message:r.message||"An error occurred during login. Please try again."}}}async function Z(){try{const o=await A();if(!o)return{success:!1,message:"Could not retrieve login token. Please refresh the page and try again."};const r=document.createElement("form");return r.method="POST",r.action="/login/index.php",r.style.display="none",Object.entries({username:"guest",password:"guest",logintoken:o}).forEach(([l,t])=>{const i=document.createElement("input");i.type="hidden",i.name=l,i.value=t,r.appendChild(i)}),document.body.appendChild(r),r.submit(),{success:!0,message:"Logging in as guest..."}}catch(o){return console.error("Guest login error:",o),{success:!1,message:"An error occurred during guest login."}}}async function A(){try{const o=await fetch("/login/index.php?traditional=1",{method:"GET",credentials:"same-origin",headers:{Accept:"text/html"}});if(!o.ok)return console.error("Failed to fetch login page:",o.status),"";const a=(await o.text()).match(/name="logintoken"\s+value="([^"]+)"/);return a&&a[1]?(console.log("Login token retrieved successfully"),a[1]):(console.warn("Login token not found in response"),"")}catch(o){return console.error("Error getting login token:",o),""}}function R(){const o=f(!1),r=f(null),a=f(null);return{isAuthenticated:o,user:r,error:a,login:async n=>{a.value=null;try{const d=await z(n);if(!d.success)throw new Error(d.message||"Login failed");o.value=!0}catch(d){throw a.value=d.message||"An error occurred during login",d}},loginAsGuest:async()=>{a.value=null;try{const n=await Z();if(!n.success)throw new Error(n.message||"Guest login failed");return n}catch(n){throw a.value=n.message||"An error occurred during guest login",n}},logout:()=>{o.value=!1,r.value=null,window.location.href="/login/logout.php"}}}function L(o){return!o||o.trim()===""?"Username is required":o.length<2?"Username must be at least 2 characters":o.length>100?"Username is too long":""}function C(o){return!o||o===""||o.length<1?"Password is required":""}const K={class:"modern-login-page"},W={class:"animated-background"},H={class:"particles"},J={class:"login-container-wrapper"},Q={class:"login-glass-card"},X={class:"form-group"},Y={class:"input-wrapper"},ee={key:0,class:"error-text"},se={class:"form-group"},te={class:"input-wrapper"},oe=["type"],ne={key:0,class:"error-text"},re={class:"form-options"},ae={class:"remember-checkbox"},ie={key:0,class:"error-alert"},le=["disabled"],ue={key:0,class:"button-content"},de={key:1,class:"button-content"},ce=["disabled"],pe=M({__name:"LoginPage",setup(o){const{login:r,loginAsGuest:a}=R(),l=k({username:"",password:"",rememberMe:!1}),t=k({username:"",password:""}),i=f(!1),n=f(!1),d=f(""),P=c=>{const e=Math.random()*4+2,u=Math.random()*20+10,O=Math.random()*5,_=Math.random()*100,G=Math.random()*100;return{width:`${e}px`,height:`${e}px`,left:`${_}%`,top:`${G}%`,animationDuration:`${u}s`,animationDelay:`${O}s`}},b=c=>{c==="username"?t.username=L(l.username):c==="password"&&(t.password=C(l.password))},F=()=>(t.username=L(l.username),t.password=C(l.password),!t.username&&!t.password),V=async()=>{if(d.value="",!!F()){n.value=!0;try{await r({username:l.username,password:l.password,rememberMe:l.rememberMe})}catch(c){d.value=c.message||"Invalid login credentials. Please try again.",n.value=!1}}},E=async()=>{n.value=!0,d.value="";try{await a()}catch(c){d.value=c.message||"Guest login is not available.",n.value=!1}},$=()=>{alert("Cookies notice: This site uses cookies to ensure you get the best experience on our website.")};return(c,e)=>(m(),p("div",K,[s("div",W,[e[8]||(e[8]=s("div",{class:"gradient-orb orb-1"},null,-1)),e[9]||(e[9]=s("div",{class:"gradient-orb orb-2"},null,-1)),e[10]||(e[10]=s("div",{class:"gradient-orb orb-3"},null,-1)),s("div",H,[(m(),p(N,null,S(20,u=>s("div",{class:"particle",key:u,style:q(P())},null,4)),64))]),e[11]||(e[11]=x('<div class="wave-container" data-v-52071598><svg class="wave" viewBox="0 0 1200 120" preserveAspectRatio="none" data-v-52071598><path d="M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5C438.64,32.43,512.34,53.67,583,72.05c69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113-14.29,1200,52.47V0Z" opacity=".25" class="wave-path wave-1" data-v-52071598></path><path d="M0,0V15.81C13,36.92,27.64,56.86,47.69,72.05,99.41,111.27,165,111,224.58,91.58c31.15-10.15,60.09-26.07,89.67-39.8,40.92-19,84.73-46,130.83-49.67,36.26-2.85,70.9,9.42,98.6,31.56,31.77,25.39,62.32,62,103.63,73,40.44,10.79,81.35-6.69,119.13-24.28s75.16-39,116.92-43.05c59.73-5.85,113.28,22.88,168.9,38.84,30.2,8.66,59,6.17,87.09-7.5,22.43-10.89,48-26.93,60.65-49.24V0Z" opacity=".5" class="wave-path wave-2" data-v-52071598></path><path d="M0,0V5.63C149.93,59,314.09,71.32,475.83,42.57c43-7.64,84.23-20.12,127.61-26.46,59-8.63,112.48,12.24,165.56,35.4C827.93,77.22,886,95.24,951.2,90c86.53-7,172.46-45.71,248.8-84.81V0Z" class="wave-path wave-3" data-v-52071598></path></svg></div>',1))]),s("div",J,[s("div",Q,[e[25]||(e[25]=x('<div class="logo-section" data-v-52071598><div class="logo-circle" data-v-52071598><img src="https://dev.bheem.cloud/pluginfile.php?file=%2F1%2Ftheme_edoo%2Fmain_logo%2F-1%2Flogo.png" alt="Bheem Academy" class="logo-image" data-v-52071598></div><h1 class="welcome-title" data-v-52071598> Welcome to <span class="gradient-text" data-v-52071598>Bheem Academy</span></h1><p class="welcome-subtitle" data-v-52071598>AI-Driven Learning for a Smarter Future</p></div>',1)),s("form",{onSubmit:T(V,["prevent"]),class:"modern-login-form",novalidate:""},[s("div",X,[s("div",Y,[e[12]||(e[12]=s("div",{class:"input-icon"},[s("i",{class:"fas fa-user"})],-1)),w(s("input",{type:"text",id:"username","onUpdate:modelValue":e[0]||(e[0]=u=>l.username=u),class:v(["modern-input",{"has-error":t.username}]),placeholder:"Username",autocomplete:"username",onBlur:e[1]||(e[1]=u=>b("username")),onFocus:e[2]||(e[2]=u=>t.username="")},null,34),[[U,l.username]])]),t.username?(m(),p("div",ee,[e[13]||(e[13]=s("i",{class:"fas fa-exclamation-circle"},null,-1)),g(" "+y(t.username),1)])):h("",!0)]),s("div",se,[s("div",te,[e[14]||(e[14]=s("div",{class:"input-icon"},[s("i",{class:"fas fa-lock"})],-1)),w(s("input",{type:i.value?"text":"password",id:"password","onUpdate:modelValue":e[3]||(e[3]=u=>l.password=u),class:v(["modern-input",{"has-error":t.password}]),placeholder:"Password",autocomplete:"current-password",onBlur:e[4]||(e[4]=u=>b("password")),onFocus:e[5]||(e[5]=u=>t.password="")},null,42,oe),[[B,l.password]]),s("button",{type:"button",class:"password-toggle",onClick:e[6]||(e[6]=u=>i.value=!i.value),tabindex:"-1"},[s("i",{class:v(i.value?"fas fa-eye-slash":"fas fa-eye")},null,2)])]),t.password?(m(),p("div",ne,[e[15]||(e[15]=s("i",{class:"fas fa-exclamation-circle"},null,-1)),g(" "+y(t.password),1)])):h("",!0)]),s("div",re,[s("label",ae,[w(s("input",{type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=u=>l.rememberMe=u)},null,512),[[D,l.rememberMe]]),e[16]||(e[16]=s("span",{class:"checkmark"},null,-1)),e[17]||(e[17]=s("span",{class:"checkbox-label"},"Remember me",-1))]),e[18]||(e[18]=s("a",{href:"/login/forgot_password.php",class:"forgot-link"}," Lost password? ",-1))]),d.value?(m(),p("div",ie,[e[19]||(e[19]=s("i",{class:"fas fa-exclamation-triangle"},null,-1)),s("span",null,y(d.value),1)])):h("",!0),s("button",{type:"submit",class:v(["login-button",{loading:n.value}]),disabled:n.value},[n.value?(m(),p("span",de,[...e[21]||(e[21]=[s("span",{class:"spinner"},null,-1),g(" Logging in... ",-1)])])):(m(),p("span",ue,[...e[20]||(e[20]=[s("i",{class:"fas fa-sign-in-alt"},null,-1),g(" Log in ",-1)])]))],10,le),e[23]||(e[23]=s("div",{class:"divider"},[s("span",null,"or")],-1)),s("button",{type:"button",onClick:E,class:"guest-button",disabled:n.value},[...e[22]||(e[22]=[s("i",{class:"fas fa-user-shield"},null,-1),g(" Access as a guest ",-1)])],8,ce)],32),s("div",{class:"card-footer"},[s("button",{type:"button",class:"cookies-link",onClick:$},[...e[24]||(e[24]=[s("i",{class:"fas fa-cookie-bite"},null,-1),g(" Cookies notice ",-1)])])])]),e[26]||(e[26]=s("div",{class:"decorative-elements"},[s("div",{class:"deco-circle circle-1"}),s("div",{class:"deco-circle circle-2"}),s("div",{class:"deco-circle circle-3"})],-1))])]))}}),me=(o,r)=>{const a=o.__vccOpts||o;for(const[l,t]of r)a[l]=t;return a},ge=me(pe,[["__scopeId","data-v-52071598"]]),fe={id:"app",class:"app-container"},ve=M({__name:"App",setup(o){return(r,a)=>(m(),p("div",fe,[I(ge)]))}}),he=j(ve);he.mount("#app");
//# sourceMappingURL=index-H8_qyuhY.js.map
